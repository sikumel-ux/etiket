<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Manifes Mahika Trans</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;font-family:'Poppins',sans-serif;margin:0;padding:0;}
body{background:#f4f6f8;padding:16px;}
h2{text-align:center;margin-bottom:16px;color:#0066AE;}
.card{background:#fff;border-radius:14px;padding:18px;box-shadow:0 6px 20px rgba(0,0,0,.08);margin-bottom:20px;overflow:hidden;}
.table-wrapper{overflow-x:auto;}
table{width:100%;border-collapse:collapse;font-size:12px;min-width:320px;}
thead{background:#0066AE;color:#fff;}
th,td{padding:8px;border-bottom:1px solid #ddd;text-align:center;}
tbody tr:hover{background:#f1f7ff;}
@media (max-width:480px){th,td{font-size:10px;padding:6px;}}
</style>
</head>

<body>
<h2>Daftar Penumpang</h2>

<div class="card">
  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>No</th>
          <th>Tanggal</th>
          <th>Jam</th>
          <th>Nama</th>
          <th>Armada</th>
          <th>Tujuan</th>
        </tr>
      </thead>
      <tbody id="manifesData"></tbody>
    </table>
  </div>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbxLrJrkBAPndRfbgH93T0IkaZQH8Q1RS9r301Aau63_j4QWqvEJ0YtmKuEJv0JigYWT/exec?manifes=1";

async function loadManifes(){
  try {
    const res = await fetch(API_URL);
    const out = await res.json();

    if(!out.status){
      document.body.innerHTML = "<h3 style='text-align:center'>Gagal memuat data: "+out.message+"</h3>";
      return;
    }

    const tbody = document.getElementById("manifesData");
    tbody.innerHTML = "";
    let no = 1;

    out.data.forEach(d=>{
      const tgl = new Date(d.tanggal).toLocaleDateString("id-ID", {day:'2-digit',month:'short',year:'numeric'});
      const tr = `<tr>
                    <td>${no++}</td>
                    <td>${tgl}</td>
                    <td>${d.jam}</td>
                    <td>${d.nama}</td>
                    <td>${d.armada}</td>
                    <td>${d.tujuan}</td>
                  </tr>`;
      tbody.innerHTML += tr;
    });

  } catch(err){
    document.body.innerHTML = "<h3 style='text-align:center'>Gagal koneksi API</h3>";
    console.error(err);
  }
}

loadManifes();
</script>

</body>
</html>
